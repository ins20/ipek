<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Пользователи</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  </head>
  <body>
    <aside>
      <nav>
        <a href="index.html">
          <i class="bx bx-user"></i>
          <span> Пользователи </span>
        </a>
        <a href="modules.html">
          <i class="bx bx-file-blank"></i>
          <span> Модули </span>
        </a>
        <a href="passwords.html">
          <i class="bx bx-lock-alt"></i>
          <span> Пароли </span>
        </a>
      </nav>
    </aside>
    <main>
      <h1>Управление пользователями</h1>
      <div style="display: flex; gap: 20px">
        <form>
        <input placeholder="ФИО" id="fio" type="text" name="fio" required />

        <div style="display: flex; gap: 12px">
          <label>
            <input name="lang" type="radio" value="python" required />
            <span>Python</span>
          </label>
  
          <label>
            <input name="lang" type="radio" value="php" />
            <span>PHP</span>
          </label>
        </div>
        <button class="blue-button">Создать пользователя</button>
        <button class="green-button" type="button" onclick="generateCards()">Сформировать карточки</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>id</th>
            <th>ФИО</th>
            <th>Тип</th>
            <th>Номер жеребьевки</th>
            <th>Логин</th>
            <th>Пароль</th>
            <th>Действия</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </main>
  </div>

  </body>

  <script>
    const users = [
      {
        id: 1,
        fio: "Иванов Иван Иванович",
        lot: 1,
        lang: "python",
        login: "admin",
        password: "admin",
      },
      {
        id: 2,
        fio: "Иванов Иван Иванович",
        lot: 1,
        lang: "python",
        login: "admin",
        password: "admin",
      },
      {
        id: 3,
        fio: "Иванов Иван Иванович",
        lot: 1,
        lang: "python",
        login: "admin",
        password: "admin",
      },
    ];

    const form = document.querySelector("form");
    const table = document.querySelector("table");
    const tbody = table.querySelector("tbody");

    tbody.innerHTML = users
      .map(({ id, fio, lot, lang, login, password }) => {
        return `
        <tr>
          <td>${id}</td>
          <td>${fio}</td>
          <td>${lang}</td>
          <td>${lot}</td>
          <td>${login}</td>
          <td>${password}</td>
          <td class='buttons'>
            <button onclick='deleteUser(${id})'>
              <span>удалить</span>
              <i class='bx bx-trash' ></i>
            </button>
            <button onclick='editUser(${id})'>
              <span>редактировать</span>
              <i class='bx bx-pencil' ></i>
            </button>
          </td>
        </tr>
      `;
      })
      .join("");

    function generateCards() {
      console.log(users);
    }

    function deleteUser(id) {
      console.log(id);
      // fetch(`deleteUsers`, {}).then((res) => (tbody.innerHTML = res));
    }
    function editUser(id) {
      console.log(id);
      // fetch(`cancelUsers`, {}).then((res) => (tbody.innerHTML = res));
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const formData = new FormData(event.target);

      const formValues = {
        fio: formData.get("fio"),
        lot: formData.get("lot"),
        lang: formData.get("lang"),
      };
      // fetch(`createUser`, {}).then((res) => (tbody.innerHTML = res));

      console.log(formValues);
    });
  </script>
</html>
